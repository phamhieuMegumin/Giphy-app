(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{39:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(1),c=n.n(a),s=n(19),i=n.n(s),o=n(7),u=n(10),j=n.n(u),l=n(15),h=(n(38),{login:function(){var e=Object(l.a)(j.a.mark((function e(t){var n,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://server-giphy.herokuapp.com/user/login",{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 2:if(401===(n=e.sent).status){e.next=11;break}return e.next=6,n.json();case 6:return r=e.sent,localStorage.setItem("auth_token",r.token),e.abrupt("return",r);case 11:return a={isAuthenticated:!1,user:{username:"",role:""}},e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),register:function(){var e=Object(l.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://server-giphy.herokuapp.com/user/register",{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),logout:function(){var e=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://server-giphy.herokuapp.com/user/logout",{method:"get",headers:{"Content-Type":"application/json",auth_token:localStorage.getItem("auth_token")}});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),isAuthenticated:function(){var e=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://server-giphy.herokuapp.com/user/authenticated",{method:"get",headers:{"Content-Type":"application/json",auth_token:localStorage.getItem("auth_token")}});case 2:if(401===(t=e.sent).status){e.next=10;break}return console.log(t.status),e.next=7,t.json();case 7:return e.abrupt("return",e.sent);case 10:return e.abrupt("return",{isAuthenticated:!1,user:{username:"",role:""}});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),p=Object(a.createContext)(),b=function(e){var t=e.children,n=Object(a.useState)(null),c=Object(o.a)(n,2),s=c[0],i=c[1],u=Object(a.useState)(!1),j=Object(o.a)(u,2),l=j[0],b=j[1],d=Object(a.useState)(!1),O=Object(o.a)(d,2),m=O[0],x=O[1];return Object(a.useEffect)((function(){h.isAuthenticated().then((function(e){i(e.user),b(e.isAuthenticated),x(!0)}))}),[]),Object(r.jsx)("div",{children:m?Object(r.jsx)(p.Provider,{value:{user:s,setUser:i,isAuthenticated:l,setIsAuthenticated:b},children:t}):Object(r.jsx)("h1",{children:"Loading"})})},d=n(11),O=(n(39),n(60)),m=n(61),x=n(62),f=n(63),g=n(74),v=n(64);var y=function(){var e=Object(a.useContext)(p),t=e.user,n=e.setUser,c=e.isAuthenticated,s=e.setIsAuthenticated,i=Object(a.useState)(!1),u=Object(o.a)(i,2),j=u[0],l=u[1],b=function(){h.logout().then((function(e){e.success&&(console.log("remove"),localStorage.removeItem("auth_token"),n(e.user),s(!1))}))};return Object(r.jsx)("div",{children:Object(r.jsxs)(m.a,{color:"light",light:!0,expand:"md",children:[Object(r.jsx)(d.b,{to:"/Giphy-app",children:Object(r.jsx)(x.a,{children:"Logo"})}),Object(r.jsx)(f.a,{onClick:function(){return l(!j)}}),Object(r.jsx)(g.a,{isOpen:j,navbar:!0,children:Object(r.jsx)(v.a,{className:"mr-auto",navbar:!0,children:c?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(O.a,{children:Object(r.jsx)(d.b,{to:"/Giphy-app",children:"Home"})}),Object(r.jsx)(O.a,{children:Object(r.jsx)(d.b,{to:"/Giphy-app/favorites",children:"Favorites"})}),"admin"===t.role?Object(r.jsx)(O.a,{children:Object(r.jsx)(d.b,{to:"/Giphy-app/admin",children:"Admin"})}):null,Object(r.jsx)(O.a,{children:Object(r.jsx)("a",{href:" # ",onClick:b,style:{cursor:"pointer",position:"absolute",right:20},children:"Logout"})})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(O.a,{children:Object(r.jsx)(d.b,{to:"/Giphy-app",children:"Home"})}),Object(r.jsx)(O.a,{children:Object(r.jsx)(d.b,{to:"/Giphy-app/login",children:"Login"})}),Object(r.jsx)(O.a,{children:Object(r.jsx)(d.b,{to:"/Giphy-app/register",children:"Register"})})]})})})]})})},k=n(8),w=n(65),S=n(66),A=(n(52),{getFavorite:function(){var e=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://server-giphy.herokuapp.com/user/favorites",{method:"get",headers:{"Content-Type":"application/json",auth_token:localStorage.getItem("auth_token")}});case 2:if(401===(t=e.sent).status){e.next=9;break}return e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",{message:{msgBody:"UnAuthorized",msgError:!0}});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),postFavorite:function(){var e=Object(l.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://server-giphy.herokuapp.com/user/favorite",{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json",auth_token:localStorage.getItem("auth_token")}});case 2:if(401===(n=e.sent).status){e.next=9;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",{message:{msgBody:"UnAuthorized",msgError:!0}});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),delete:function(){var e=Object(l.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://server-giphy.herokuapp.com/user/delete",{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json",auth_token:localStorage.getItem("auth_token")}});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});var C=function(e){var t=e.data,n=Object(a.useState)(!1),c=Object(o.a)(n,2),s=c[0],i=c[1],u=Object(a.useState)(null),j=Object(o.a)(u,2),l=(j[0],j[1]),h=Object(k.f)(),b=Object(a.useContext)(p);return Object(r.jsxs)("div",{className:"item-container",children:[Object(r.jsx)("div",{className:"img-box",children:Object(r.jsx)("img",{src:t})}),Object(r.jsx)("div",{className:"btn-add",children:Object(r.jsxs)(w.a,{color:"primary",onClick:function(){b.isAuthenticated&&i(!0);var e={url:t};A.postFavorite(e).then((function(e){var t=e.message;t.msgError?"UnAuthorzied"===t.msgBody?(l(t),b.setUser({username:"",role:""}),b.setIsAuthenticated(!1)):l(t):A.getFavorite().then((function(e){l(t)})),i(!1)})),b.isAuthenticated||h.push("/Giphy-app/login")},children:["Add to favorite",s?Object(r.jsx)(S.a,{color:"light",size:"sm",style:{marginLeft:10}}):""]})})]})},N=n(67),E=n(68),G=n(69);n(53);var T=function(e){for(var t=e.total,n=e.changePage,a=e.itemPerPage,c=[],s=1;s<=Math.ceil(t/a);s++)c.push(s);return Object(r.jsx)("div",{className:"pagination",children:Object(r.jsx)(N.a,{children:c.map((function(e){return Object(r.jsx)(E.a,{children:Object(r.jsx)(G.a,{href:"#",onClick:function(){return function(e){n(e)}(e)},children:e})})}))})})};var I=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!1),i=Object(o.a)(s,2),u=i[0],h=i[1],p=Object(a.useState)(15),b=Object(o.a)(p,2),d=b[0],O=(b[1],Object(a.useState)(1)),m=Object(o.a)(O,2),x=m[0],f=m[1],g=d*x,v=g-d;Object(a.useEffect)((function(){(function(){var e=Object(l.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,fetch("http://api.giphy.com/v1/gifs/trending?api_key=JjiRVm3bXZXAkfwAccSJB7bGELIXtT11&limit=".concat(50));case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,h(!1),c(n.data);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var y=n.slice(v,g);return Object(r.jsx)("div",{className:"container",children:u?Object(r.jsx)("h1",{children:"Loading"}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"ListItems",children:y.map((function(e){return Object(r.jsx)(C,{data:e.images.original.url},e.id)}))}),Object(r.jsx)(T,{total:50,changePage:function(e){f(e)},itemPerPage:d})]})})};n(54);var P=function(){return Object(r.jsxs)("div",{className:"home-page",children:[Object(r.jsx)("h1",{children:"Top Trending Giphy"}),Object(r.jsx)(I,{})]})},_=n(17),L=n(12),B=n(70),F=n(71),R=n(72),U=n(73);var J=function(e){return Object(r.jsx)("div",{className:function(e){var t="alert ";return e.message.msgError?t+="alert-danger":t+="alert-primary",t}(e),role:"alert",children:e.message.msgBody})};n(55);var z=function(){var e=Object(a.useState)({username:"",password:""}),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!1),i=Object(o.a)(s,2),u=i[0],j=i[1],l=Object(a.useState)(null),b=Object(o.a)(l,2),d=b[0],O=b[1],m=function(e){c(Object(L.a)(Object(L.a)({},n),{},Object(_.a)({},e.target.name,e.target.value)))},x=Object(a.useContext)(p),f=Object(k.f)();return Object(r.jsx)("div",{className:"container-detail",children:Object(r.jsxs)("div",{className:"login-container",children:[Object(r.jsx)("h1",{style:{marginBottom:20},children:"Login"}),Object(r.jsxs)(B.a,{onSubmit:function(e){e.preventDefault(),j(!0),h.login(n).then((function(e){var t=e.isAuthenticated,n=e.user,r=e.message;j(!1),t?(x.setUser(n),x.setIsAuthenticated(t),f.push("/Giphy-app")):O(r)}))},children:[Object(r.jsxs)(F.a,{children:[Object(r.jsx)(R.a,{for:"exampleEmail",children:"Username"}),Object(r.jsx)(U.a,{type:"text",name:"username",id:"exampleEmail",placeholder:"username",onChange:m})]}),Object(r.jsxs)(F.a,{children:[Object(r.jsx)(R.a,{for:"examplePassword",children:"Password"}),Object(r.jsx)(U.a,{type:"password",name:"password",id:"examplePassword",placeholder:"password",onChange:m})]}),Object(r.jsxs)(w.a,{color:"primary",style:{marginTop:20},children:["Login",u?Object(r.jsx)(S.a,{color:"light",size:"sm",style:{marginLeft:10}}):""]}),d?Object(r.jsx)(J,{message:d}):null]})]})})};n(56);var D=function(){var e=Object(a.useState)({username:"",password:"",role:""}),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(null),i=Object(o.a)(s,2),u=i[0],j=i[1],l=Object(a.useState)(!1),p=Object(o.a)(l,2),b=p[0],d=p[1],O=Object(a.useRef)(null),m=Object(k.f)();Object(a.useEffect)((function(){return function(){clearTimeout(O)}}),[]);var x=function(e){c(Object(L.a)(Object(L.a)({},n),{},Object(_.a)({},e.target.name,e.target.value)))};return Object(r.jsx)("div",{className:"container-detail",children:Object(r.jsxs)("div",{className:"register-container",children:[Object(r.jsx)("h1",{style:{marginBottom:20},children:"Register"}),Object(r.jsxs)(B.a,{onSubmit:function(e){e.preventDefault(),d(!0),h.register(n).then((function(e){var t=e.message;j(t),c({username:"",password:"",role:""}),t.msgError||(d(!1),O=setTimeout((function(){m.push("/Giphy-app/login")}),2e3)),d(!1)}))},children:[Object(r.jsxs)(F.a,{children:[Object(r.jsx)(R.a,{for:"exampleEmail",children:"User"}),Object(r.jsx)(U.a,{type:"text",name:"username",id:"exampleEmail",value:n.username,placeholder:"username",onChange:x})]}),Object(r.jsxs)(F.a,{children:[Object(r.jsx)(R.a,{for:"examplePassword",children:"Password"}),Object(r.jsx)(U.a,{type:"password",name:"password",id:"examplePassword",value:n.password,placeholder:"password",onChange:x})]}),Object(r.jsxs)(F.a,{children:[Object(r.jsx)(R.a,{for:"exampleRole",children:"Role"}),Object(r.jsx)(U.a,{type:"text",name:"role",id:"exampleRole",value:n.role,placeholder:"Role (admin/user)",onChange:x})]}),Object(r.jsxs)(w.a,{color:"primary",style:{marginTop:20,marginBottom:20},children:["Register",b?Object(r.jsx)(S.a,{color:"light",size:"sm",style:{marginLeft:10}}):""]}),u?Object(r.jsx)(J,{message:u}):null]})]})})};var X=function(e){var t=e.listfavorite,n=e.render,c=Object(a.useState)(null),s=Object(o.a)(c,2),i=(s[0],s[1]),u=Object(a.useState)(!1),j=Object(o.a)(u,2),l=j[0],h=j[1],p=t.url;return Object(r.jsxs)("div",{className:"item-container",children:[Object(r.jsx)("div",{className:"img-box",children:Object(r.jsx)("img",{src:p})}),Object(r.jsx)("div",{className:"btn-delete",children:Object(r.jsxs)(w.a,{color:"danger",onClick:function(){var e={url:p};h(!0),A.delete(e).then((function(e){var t=e.message;t.msgError&&i(t.msgError),n(p)}))},children:["Delete",l?Object(r.jsx)(S.a,{color:"light",size:"sm",style:{marginLeft:10}}):""]})})]})};n(57);var H=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!1),i=Object(o.a)(s,2),u=i[0],j=i[1];Object(a.useEffect)((function(){A.getFavorite().then((function(e){c(e.favorites)}))}),[u]);var l=function(){j(!u)};return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{style:{marginBottom:30,textAlign:"center",marginTop:20},children:"Your favorite list"}),Object(r.jsx)("div",{className:"favorite-container",children:n.map((function(e){return Object(r.jsx)(X,{listfavorite:e,render:l},e._id)}))})]})};var M=function(){return Object(r.jsx)("div",{children:Object(r.jsx)("h1",{children:"Admin Page"})})},V=n(20);var Y=function(e){var t=e.component,n=e.roles,c=Object(V.a)(e,["component","roles"]),s=Object(a.useContext)(p),i=s.isAuthenticated,o=s.user;return Object(r.jsx)(k.b,Object(L.a)(Object(L.a)({},c),{},{render:function(e){return i?n.includes(o.role)?Object(r.jsx)(t,Object(L.a)({},e)):Object(r.jsx)(k.a,{to:{pathname:"/",state:{from:e.location}}}):Object(r.jsx)(k.a,{to:{pathname:"/login",state:{from:e.location}}})}}))};var Z=function(e){var t=e.component,n=Object(V.a)(e,["component"]),c=Object(a.useContext)(p).isAuthenticated;return Object(r.jsx)(k.b,Object(L.a)(Object(L.a)({},n),{},{render:function(e){return c?Object(r.jsx)(k.a,{to:{pathname:"/",state:{from:e.location}}}):Object(r.jsx)(t,Object(L.a)({},e))}}))};var q=function(){return Object(r.jsxs)(d.a,{children:[Object(r.jsx)(y,{}),Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)(k.b,{exact:!0,path:"/Giphy-app",component:P}),Object(r.jsx)(k.b,{path:"/Giphy-app/login",component:z}),Object(r.jsx)(Z,{path:"/Giphy-app/register",component:D}),Object(r.jsx)(Y,{path:"/Giphy-app/favorites",roles:["user","admin"],component:H}),Object(r.jsx)(Y,{path:"/Giphy-app/admin",roles:["admin"],component:M})]})]})};n(58);i.a.render(Object(r.jsx)(b,{children:Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(q,{})})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.40088b92.chunk.js.map